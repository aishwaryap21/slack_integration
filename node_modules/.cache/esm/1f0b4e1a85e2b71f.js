let RTMClient,SLACK_OAUTH_TOKEN,BOT_SPAM_CHANNEL,WebClient;_85e‍.w("@slack/rtm-api",[["RTMClient",["RTMClient"],function(v){RTMClient=v}]]);_85e‍.w("./constants",[["SLACK_OAUTH_TOKEN",["SLACK_OAUTH_TOKEN"],function(v){SLACK_OAUTH_TOKEN=v}],["BOT_SPAM_CHANNEL",["BOT_SPAM_CHANNEL"],function(v){BOT_SPAM_CHANNEL=v}]]);_85e‍.w("@slack/web-api",[["WebClient",["WebClient"],function(v){WebClient=v}]]);


const packageJson = require('../package.json');
//initialise the client
const rtm=new RTMClient(SLACK_OAUTH_TOKEN);
const web=new WebClient(SLACK_OAUTH_TOKEN);

rtm.start().catch(_85e‍.g.console.error); 
rtm.on('ready', async () =>{
    console.log('bot started')
    sendMessage(BOT_SPAM_CHANNEL,`Bot version ${packageJson.version} is Online`)
}); 
rtm.on('slack_event', async (eventType, event) =>{
    if (event &&event.type==='message'){
            hello(event.channel,event.user,event.text);        
    }
} 
    )

    function hello(channelId,userId,message){
        $a=message
    sendMessage(channelId,`Heya!<@${userId}> texted you ${a}`)
}
async function sendMessage(channel, message){
    //helper function to post a message.
    await web.chat.postMessage({
        channel:channel,
        text:message,
    })
}